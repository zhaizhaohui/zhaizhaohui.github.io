<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>防抖和节流 | BenHang</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="BenHang&#39;s Web Develop Note">
    
    <link rel="preload" href="/assets/css/0.styles.7911914d.css" as="style"><link rel="preload" href="/assets/js/app.e8464fa7.js" as="script"><link rel="preload" href="/assets/js/2.2b22f60d.js" as="script"><link rel="preload" href="/assets/js/1.ac6c8be2.js" as="script"><link rel="preload" href="/assets/js/69.c3a35b4b.js" as="script"><link rel="prefetch" href="/assets/js/10.32b47deb.js"><link rel="prefetch" href="/assets/js/100.ecd7e950.js"><link rel="prefetch" href="/assets/js/101.3a40130c.js"><link rel="prefetch" href="/assets/js/102.c9aa7135.js"><link rel="prefetch" href="/assets/js/103.194c69e9.js"><link rel="prefetch" href="/assets/js/104.911516c1.js"><link rel="prefetch" href="/assets/js/105.bbd4539b.js"><link rel="prefetch" href="/assets/js/106.0329fc31.js"><link rel="prefetch" href="/assets/js/107.6c867397.js"><link rel="prefetch" href="/assets/js/108.4a0a87a3.js"><link rel="prefetch" href="/assets/js/109.fdcc7be7.js"><link rel="prefetch" href="/assets/js/11.e6be3db3.js"><link rel="prefetch" href="/assets/js/110.04184aec.js"><link rel="prefetch" href="/assets/js/111.035479ba.js"><link rel="prefetch" href="/assets/js/112.4c63076a.js"><link rel="prefetch" href="/assets/js/12.2b9bad42.js"><link rel="prefetch" href="/assets/js/13.9fb6e9d8.js"><link rel="prefetch" href="/assets/js/14.4b0da003.js"><link rel="prefetch" href="/assets/js/15.c7107f05.js"><link rel="prefetch" href="/assets/js/16.55dcdebd.js"><link rel="prefetch" href="/assets/js/17.71408a99.js"><link rel="prefetch" href="/assets/js/18.ddeb2228.js"><link rel="prefetch" href="/assets/js/19.2c37adce.js"><link rel="prefetch" href="/assets/js/20.af830020.js"><link rel="prefetch" href="/assets/js/21.2eca76f9.js"><link rel="prefetch" href="/assets/js/22.3c9f59cc.js"><link rel="prefetch" href="/assets/js/23.45d62cbf.js"><link rel="prefetch" href="/assets/js/24.9bf2b224.js"><link rel="prefetch" href="/assets/js/25.d1343eda.js"><link rel="prefetch" href="/assets/js/26.b89d52ad.js"><link rel="prefetch" href="/assets/js/27.738cfd4e.js"><link rel="prefetch" href="/assets/js/28.c0427ada.js"><link rel="prefetch" href="/assets/js/29.aa16f315.js"><link rel="prefetch" href="/assets/js/3.ee6a6a1f.js"><link rel="prefetch" href="/assets/js/30.feca0d9b.js"><link rel="prefetch" href="/assets/js/31.28c2e154.js"><link rel="prefetch" href="/assets/js/32.cd50d246.js"><link rel="prefetch" href="/assets/js/33.da5a1759.js"><link rel="prefetch" href="/assets/js/34.94e3c8f9.js"><link rel="prefetch" href="/assets/js/35.2b2bf513.js"><link rel="prefetch" href="/assets/js/36.fa2eadd3.js"><link rel="prefetch" href="/assets/js/37.0f661078.js"><link rel="prefetch" href="/assets/js/38.0b6a36e9.js"><link rel="prefetch" href="/assets/js/39.e69e932b.js"><link rel="prefetch" href="/assets/js/4.0c187c31.js"><link rel="prefetch" href="/assets/js/40.5b61c6dd.js"><link rel="prefetch" href="/assets/js/41.b5d4c00f.js"><link rel="prefetch" href="/assets/js/42.f5d470b5.js"><link rel="prefetch" href="/assets/js/43.03e8855f.js"><link rel="prefetch" href="/assets/js/44.d78fa281.js"><link rel="prefetch" href="/assets/js/45.619c9ccb.js"><link rel="prefetch" href="/assets/js/46.f3aed0d8.js"><link rel="prefetch" href="/assets/js/47.0735e60c.js"><link rel="prefetch" href="/assets/js/48.a4c06223.js"><link rel="prefetch" href="/assets/js/49.9be0cd97.js"><link rel="prefetch" href="/assets/js/5.c1bf2450.js"><link rel="prefetch" href="/assets/js/50.6d1c4073.js"><link rel="prefetch" href="/assets/js/51.39288330.js"><link rel="prefetch" href="/assets/js/52.b52ded01.js"><link rel="prefetch" href="/assets/js/53.f6971602.js"><link rel="prefetch" href="/assets/js/54.afc58e15.js"><link rel="prefetch" href="/assets/js/55.76afbbac.js"><link rel="prefetch" href="/assets/js/56.24dd1be3.js"><link rel="prefetch" href="/assets/js/57.2910f81e.js"><link rel="prefetch" href="/assets/js/58.ad86f865.js"><link rel="prefetch" href="/assets/js/59.fb4493d2.js"><link rel="prefetch" href="/assets/js/6.e848c396.js"><link rel="prefetch" href="/assets/js/60.5294038a.js"><link rel="prefetch" href="/assets/js/61.e9641427.js"><link rel="prefetch" href="/assets/js/62.82c19408.js"><link rel="prefetch" href="/assets/js/63.73417db4.js"><link rel="prefetch" href="/assets/js/64.4d539d0c.js"><link rel="prefetch" href="/assets/js/65.067b0a44.js"><link rel="prefetch" href="/assets/js/66.134e47ed.js"><link rel="prefetch" href="/assets/js/67.215752d9.js"><link rel="prefetch" href="/assets/js/68.505b9316.js"><link rel="prefetch" href="/assets/js/7.48c7c86b.js"><link rel="prefetch" href="/assets/js/70.7187e37b.js"><link rel="prefetch" href="/assets/js/71.da724536.js"><link rel="prefetch" href="/assets/js/72.f9bcdcbd.js"><link rel="prefetch" href="/assets/js/73.2d6d6ec5.js"><link rel="prefetch" href="/assets/js/74.d4b0bf9b.js"><link rel="prefetch" href="/assets/js/75.ddd1a43e.js"><link rel="prefetch" href="/assets/js/76.d6a19828.js"><link rel="prefetch" href="/assets/js/77.3ea48332.js"><link rel="prefetch" href="/assets/js/78.ed5e0f44.js"><link rel="prefetch" href="/assets/js/79.448a567b.js"><link rel="prefetch" href="/assets/js/80.d49a9478.js"><link rel="prefetch" href="/assets/js/81.56709ab6.js"><link rel="prefetch" href="/assets/js/82.9254eed7.js"><link rel="prefetch" href="/assets/js/83.f85d29db.js"><link rel="prefetch" href="/assets/js/84.857fff65.js"><link rel="prefetch" href="/assets/js/85.b00b52e4.js"><link rel="prefetch" href="/assets/js/86.819f22a3.js"><link rel="prefetch" href="/assets/js/87.ce37c997.js"><link rel="prefetch" href="/assets/js/88.ddeada6d.js"><link rel="prefetch" href="/assets/js/89.ae3362c4.js"><link rel="prefetch" href="/assets/js/90.2621330d.js"><link rel="prefetch" href="/assets/js/91.9cf30003.js"><link rel="prefetch" href="/assets/js/92.2c277a0a.js"><link rel="prefetch" href="/assets/js/93.42254cda.js"><link rel="prefetch" href="/assets/js/94.60d2b0a5.js"><link rel="prefetch" href="/assets/js/95.e5364789.js"><link rel="prefetch" href="/assets/js/96.878d354d.js"><link rel="prefetch" href="/assets/js/97.cab16d59.js"><link rel="prefetch" href="/assets/js/98.a28aa3ad.js"><link rel="prefetch" href="/assets/js/99.ee4ac13a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.4dff5a50.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7911914d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">BenHang</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web" class="mobile-dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link router-link-active">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/ECMA/" class="nav-link">
  ECMA
</a></li><li class="dropdown-item"><!----> <a href="/TypeScript/" class="nav-link">
  TypeScript
</a></li></ul></div></div><div class="nav-item"><a href="/Browser/" class="nav-link">
  Browser
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue2/" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">
  VuePress
</a></li></ul></div></div><div class="nav-item"><a href="/React/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Library" class="dropdown-title"><span class="title">Library</span> <span class="arrow down"></span></button> <button type="button" aria-label="Library" class="mobile-dropdown-title"><span class="title">Library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jquery/" class="nav-link">
  JQuery
</a></li><li class="dropdown-item"><!----> <a href="/EChart/" class="nav-link">
  EChart
</a></li></ul></div></div><div class="nav-item"><a href="/Doc/" class="nav-link">
  Doc
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web" class="mobile-dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link router-link-active">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/ECMA/" class="nav-link">
  ECMA
</a></li><li class="dropdown-item"><!----> <a href="/TypeScript/" class="nav-link">
  TypeScript
</a></li></ul></div></div><div class="nav-item"><a href="/Browser/" class="nav-link">
  Browser
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue2/" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">
  VuePress
</a></li></ul></div></div><div class="nav-item"><a href="/React/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Library" class="dropdown-title"><span class="title">Library</span> <span class="arrow down"></span></button> <button type="button" aria-label="Library" class="mobile-dropdown-title"><span class="title">Library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jquery/" class="nav-link">
  JQuery
</a></li><li class="dropdown-item"><!----> <a href="/EChart/" class="nav-link">
  EChart
</a></li></ul></div></div><div class="nav-item"><a href="/Doc/" class="nav-link">
  Doc
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/Js数组操作.html" class="sidebar-link">Js数组操作</a></li><li><a href="/JavaScript/Js判断各种数据类型.html" class="sidebar-link">Js判断各种数据类型</a></li><li><a href="/JavaScript/Js判断是否为空.html" class="sidebar-link">Js判断是否为空</a></li><li><a href="/JavaScript/使用ul仿下拉菜单.html" class="sidebar-link">使用ul仿下拉菜单</a></li><li><a href="/JavaScript/Js图片分割.html" class="sidebar-link">Js图片分割</a></li><li><a href="/JavaScript/textarea高度自适应.html" class="sidebar-link">textarea高度自适应</a></li><li><a href="/JavaScript/Js跨域方法.html" class="sidebar-link">Js跨域方法</a></li><li><a href="/JavaScript/回调地狱.html" class="sidebar-link">回调地狱</a></li><li><a href="/JavaScript/防抖和节流.html" class="active sidebar-link">防抖和节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/防抖和节流.html#防抖-debounce" class="sidebar-link">防抖（Debounce）</a></li><li class="sidebar-sub-header"><a href="/JavaScript/防抖和节流.html#节流-throttle" class="sidebar-link">节流（Throttle）</a></li><li class="sidebar-sub-header"><a href="/JavaScript/防抖和节流.html#防抖与节流的区别" class="sidebar-link">防抖与节流的区别</a></li></ul></li><li><a href="/JavaScript/异步的几种方式.html" class="sidebar-link">异步的几种方式</a></li><li><a href="/JavaScript/websocket大文件上传.html" class="sidebar-link">websocket 大文件上传</a></li><li><a href="/JavaScript/Seajs的使用.html" class="sidebar-link">Seajs的使用</a></li><li><a href="/JavaScript/falsy.html" class="sidebar-link">falsy</a></li><li><a href="/JavaScript/UnderscoreJs.html" class="sidebar-link">UnderscoreJs</a></li><li><a href="/JavaScript/ssr和ssg底层原理.html" class="sidebar-link">SSR和SSG底层原理</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="防抖和节流"><a href="#防抖和节流" class="header-anchor">#</a> 防抖和节流</h1> <p>防抖（Debounce）和节流（Throttle）是在前端开发（通常基于JavaScript）中用于控制函数执行频率的两种技术手段，它们的主要目的是优化性能、避免函数在短时间内被过度调用，特别是在处理一些诸如用户输入、页面滚动、窗口大小调整等频繁触发的事件时非常有用。</p> <h2 id="防抖-debounce"><a href="#防抖-debounce" class="header-anchor">#</a> 防抖（Debounce）</h2> <p>防抖的核心思想是在事件被触发后，设定一个延迟时间，在这个延迟时间内，如果事件再次被触发，就重新计算延迟时间，只有当在延迟时间内事件不再被触发时，才会执行对应的函数。简单来说，就是要等事件停止触发一段时间后才执行函数。</p> <p>以下是一个简单的防抖函数的实现代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>在上述代码中</strong></p> <p><code>debounce</code>函数接受两个参数：<code>func</code>是需要进行防抖处理的函数，<code>delay</code>是设定的延迟时间（单位通常为毫秒）。</p> <p>内部通过<code>let</code>声明了一个<code>timer</code>变量用于存储定时器的标识。</p> <p>当事件触发时，首先判断是否已经存在定时器（即之前触发事件后设置的还未执行的定时器），如果有，则清除之前的定时器（<code>clearTimeout(timer)</code>），然后重新设置一个新的定时器，当新的定时器计时结束（经过<code>delay</code>毫秒）后，才会执行<code>func</code>函数，并将当前的<code>this</code>对象和传入的参数<code>args</code>传递给<code>func</code>函数，同时将<code>timer</code>重置为<code>null</code>，以便下次事件触发时可以重新设置定时器。</p> <p><strong>应用场景示例</strong></p> <p>比如在一个搜索框中，当用户输入文字时，我们可能希望在用户停止输入一段时间后（假设延迟时间设为500毫秒）才去发送搜索请求。可以这样使用防抖函数：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> searchBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'search-box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">const</span> <span class="token function-variable function">searchFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里编写发送搜索请求的具体代码，比如调用API获取搜索结果等</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'发送搜索请求'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> debouncedSearchFunction <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span>searchFunction<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
searchBox<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> debouncedSearchFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在上述示例中，当用户在搜索框中输入文字时，每次<code>input</code>事件触发，都会调用经过防抖处理的<code>debouncedSearchFunction</code>函数，只有当用户停止输入并等待500毫秒后，才会真正执行<code>searchFunction</code>函数发送搜索请求，这样可以避免在用户输入过程中频繁发送不必要的搜索请求，节省网络资源和提高性能。</p> <h2 id="节流-throttle"><a href="#节流-throttle" class="header-anchor">#</a> 节流（Throttle）</h2> <p>节流的核心思想是在一定时间间隔内，只允许函数执行一次。也就是说，不管事件在这个时间间隔内触发多少次，函数只会按照设定的时间间隔规律地执行。</p> <p>以下是一个简单的节流函数的实现代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> interval</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> lastTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span> 
        onst now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> lastTime <span class="token operator">&gt;=</span> interval<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            lastTime <span class="token operator">=</span> now<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>在上述代码中</strong></p> <p><code>throttle</code>函数接受两个参数：<code>func</code>是需要进行节流处理的函数，<code>interval</code>是设定的时间间隔（单位通常为毫秒）。</p> <p>内部通过<code>let</code>声明了一个<code>lastTime</code>变量用于记录上一次函数执行的时间。</p> <p>当事件触发时，首先获取当前的时间（<code>now = Date.now()</code>），然后判断当前时间与上一次函数执行时间的差距是否大于等于设定的时间间隔（<code>now - lastTime &gt;= interval</code>），如果满足条件，则执行<code>func</code>函数，并将当前的<code>this</code>对象和传入的参数<code>args</code>传递给<code>func</code>函数，同时将<code>lastTime</code>更新为当前时间，以便下次判断。</p> <p><strong>应用场景示例</strong></p> <p>比如在页面滚动过程中，我们可能希望每隔一定时间间隔（假设设为200毫秒）才去执行一次计算页面滚动位置相关的函数。可以这样使用节流函数：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">scrollFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里编写计算页面滚动位置等相关代码</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'计算页面滚动位置'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> throttledScrollFunction <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>scrollFunction<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> throttledScrollFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在上述示例中，当页面滚动时，每次<code>scroll</code>事件触发，都会调用经过节流处理的<code>throttledScrollFunction</code>函数，但是只有当距离上一次执行<code>scrollFunction</code>函数的时间间隔达到200毫秒时，才会再次执行该函数，这样可以避免在页面滚动过程中频繁执行不必要的计算，节省计算资源和提高性能。</p> <h2 id="防抖与节流的区别"><a href="#防抖与节流的区别" class="header-anchor">#</a> 防抖与节流的区别</h2> <h3 id="执行频率"><a href="#执行频率" class="header-anchor">#</a> 执行频率</h3> <ul><li><p><strong>防抖</strong>：在事件停止触发一段时间后才执行函数，所以函数执行的频率取决于事件停止触发的时间间隔与设定的延迟时间的关系。如果事件频繁触发，函数可能很久都不会执行；只有当事件停止触发足够长时间（达到延迟时间）后才执行。</p></li> <li><p><strong>节流</strong>：在一定时间间隔内只允许函数执行一次，所以函数执行的频率是固定的，按照设定的时间间隔规律地执行，不管事件触发的频率如何。</p></li></ul> <h3 id="应用场景侧重"><a href="#应用场景侧重" class="header-anchor">#</a> 应用场景侧重</h3> <ul><li><strong>防抖</strong>：更适合于那些需要在事件停止触发后再做处理的场景，比如搜索框输入停止后发送搜索请求、窗口大小调整停止后更新布局等。</li> <li><strong>节流</strong>：更适合于那些需要在事件持续触发过程中按照一定时间间隔规律地做处理的场景，比如页面滚动过程中定期计算滚动位置、鼠标移动过程中定期更新鼠标位置等。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JavaScript/回调地狱.html" class="prev">
        回调地狱
      </a></span> <span class="next"><a href="/JavaScript/异步的几种方式.html">
        异步的几种方式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e8464fa7.js" defer></script><script src="/assets/js/2.2b22f60d.js" defer></script><script src="/assets/js/1.ac6c8be2.js" defer></script><script src="/assets/js/69.c3a35b4b.js" defer></script>
  </body>
</html>
