(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{317:function(a,s,e){"use strict";e.r(s);var t=e(8),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"利用http缓存提高网站的性能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#利用http缓存提高网站的性能"}},[a._v("#")]),a._v(" 利用HTTP缓存提高网站的性能？")]),a._v(" "),s("p",[a._v("利用HTTP缓存提高网站的性能，可以从以下几个方面入手：")]),a._v(" "),s("h2",{attrs:{id:"_1、合理设置缓存策略"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、合理设置缓存策略"}},[a._v("#")]),a._v(" 1、合理设置缓存策略")]),a._v(" "),s("h3",{attrs:{id:"_1-为静态资源设置适当的缓存时间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-为静态资源设置适当的缓存时间"}},[a._v("#")]),a._v(" 1. 为静态资源设置适当的缓存时间")]),a._v(" "),s("p",[a._v("网站中的静态资源，如图片、CSS样式表、JavaScript脚本等，通常在一段时间内不会发生变化。对于这些资源，可以设置较长的缓存时间。")]),a._v(" "),s("p",[a._v("例如，在服务器端发送响应时，设置"),s("code",[a._v("Cache-Control")]),a._v("头字段：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("Cache-Control: max-age"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("86400")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("这里将"),s("code",[a._v("max-age")]),a._v("设置为86400秒（即一天），意味着客户端在接下来的一天内再次请求该资源时，如果没有其他特殊情况（如用户强制刷新等），可以直接从缓存中获取，无需再向服务器确认其有效性。")]),a._v(" "),s("p",[a._v("这样可以大大减少服务器的负载，提高网站的加载速度，因为客户端无需每次都重新下载这些静态资源。")]),a._v(" "),s("h3",{attrs:{id:"_2-根据资源更新频率调整缓存时间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-根据资源更新频率调整缓存时间"}},[a._v("#")]),a._v(" 2. 根据资源更新频率调整缓存时间")]),a._v(" "),s("p",[a._v("对于不同更新频率的资源，应采用不同的缓存策略：")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("长期不变的资源")]),a._v("：如一些通用的图标、框架的核心CSS和JavaScript文件等，这些资源可以设置更长的缓存时间，甚至可以达到数月或数年（当然要确保在这么长的时间内资源确实不会发生变化）。例如：")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("Cache-Control: max-age"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2592000")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("即设置缓存时间为一个月（30天，每天86400秒）。")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("偶尔更新的资源")]),a._v("：比如网站的首页图片、定期更新的宣传文案对应的CSS样式等，这类资源可以设置相对较短的缓存时间，如一周左右：")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("Cache-Control: max-age"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("604800")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[s("p",[s("strong",[a._v("频繁更新的资源")]),a._v("：像实时新闻内容、用户动态信息等，这些资源可能需要每次都从服务器获取最新的，所以可以设置，")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("Cache-Control: no-cache"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("或者"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("Cache-Control: max-age"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("表示客户端在使用缓存之前必须先向服务器验证缓存的有效性，或者直接不允许缓存该资源，确保用户能获取到最新的信息。")])])]),a._v(" "),s("h2",{attrs:{id:"_2、正确使用缓存验证机制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、正确使用缓存验证机制"}},[a._v("#")]),a._v(" 2、正确使用缓存验证机制")]),a._v(" "),s("p",[a._v("当客户端再次请求已经缓存的资源时，需要有一种机制来验证缓存是否仍然有效，以避免使用过期的资源。常见的缓存验证机制有以下两种：")]),a._v(" "),s("h3",{attrs:{id:"_1-使用if-modified-since和last-modified"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用if-modified-since和last-modified"}},[a._v("#")]),a._v(" 1. 使用If-Modified-Since和Last-Modified")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("服务器端设置")]),a._v("：    - 服务器在首次发送资源时，要在响应头中设置"),s("code",[a._v("Last-Modified")]),a._v("字段，记录资源最后一次修改的时间戳。例如：")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("Last-Modified: Fri, 01 Nov "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2024")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(":00:00 GMT\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[s("p",[s("strong",[a._v("客户端请求验证")]),a._v("：当客户端再次请求该资源时，会在请求头中带上上次获取该资源时服务器响应头中给出的"),s("code",[a._v("Last-Modified")]),a._v("时间戳，通过"),s("code",[a._v("If-Modified-Since")]),a._v("字段。例如：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("If-Modified-Since: Fri, 01 Nov "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2024")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(":00:00 GMT\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])])]),a._v(" "),s("li",[s("p",[s("strong",[a._v("服务器响应判断")]),a._v("：服务器收到请求后，如果资源自上次发送给客户端后没有修改过，就会返回一个特殊的状态码（如"),s("code",[a._v("304 Not Modified")]),a._v("），告知客户端可以继续使用缓存中的资源；如果资源已经修改过，则会返回完整的资源更新。")])])]),a._v(" "),s("h3",{attrs:{id:"_2-使用if-none-match和etag"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用if-none-match和etag"}},[a._v("#")]),a._v(" 2. 使用If-None-Match和ETag")]),a._v(" "),s("ul",[s("li",[s("p",[s("strong",[a._v("服务器端设置")]),a._v("：    - 服务器为每个资源生成一个唯一的标识符，即"),s("code",[a._v("ETag")]),a._v("，并在首次发送资源时，在响应头中设置"),s("code",[a._v("ETag")]),a._v("字段。例如： "),s("code",[a._v('ETag: "abc1234567890def"')])])]),a._v(" "),s("li",[s("p",[s("strong",[a._v("客户端请求验证")]),a._v("：    - 当客户端再次请求该资源时，会在请求头中带上上次获取该资源时的"),s("code",[a._v("ETag")]),a._v("值，通过"),s("code",[a._v("If-None-Match")]),a._v("字段。例如：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("If-None-Match: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"abc1234567890def"')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])])]),a._v(" "),s("li",[s("p",[s("strong",[a._v("服务器响应判断")]),a._v("：    - 服务器收到请求后，如果资源自上次发送给客户端后没有修改过，就会返回一个特殊的状态码（如"),s("code",[a._v("304 Not Modified")]),a._v("），告知客户端可以继续使用缓存中的资源；如果资源已经修改过，则会返回完整的资源更新。 通过正确使用这些缓存验证机制，可以在保证客户端能获取到最新资源的前提下，尽可能地利用缓存，提高网站性能。")])])]),a._v(" "),s("h2",{attrs:{id:"_3、利用浏览器缓存和代理服务器缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、利用浏览器缓存和代理服务器缓存"}},[a._v("#")]),a._v(" 3、利用浏览器缓存和代理服务器缓存")]),a._v(" "),s("h3",{attrs:{id:"_1-优化浏览器缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-优化浏览器缓存"}},[a._v("#")]),a._v(" 1. 优化浏览器缓存")]),a._v(" "),s("ul",[s("li",[s("p",[s("strong",[a._v("确保正确的缓存指令设置")]),a._v("：如前面所述，要根据资源的特性合理设置"),s("code",[a._v("Cache-Control")]),a._v("、"),s("code",[a._v("Last-Modified")]),a._v("、"),s("code",[a._v("ETag")]),a._v("等缓存相关字段，以便浏览器能正确地缓存和使用资源。")])]),a._v(" "),s("li",[s("p",[s("strong",[a._v("利用浏览器的缓存存储机制")]),a._v("：了解浏览器的缓存存储方式，如内存缓存和磁盘缓存。对于一些经常访问的小资源（如小图标等），可能会优先存储在内存缓存中，以便更快地获取。")]),a._v(" "),s("p",[a._v("而对于一些较大的资源（如图片、视频等），可能会存储在磁盘缓存中。通过合理设计网站资源的布局和加载顺序，可以更好地利用浏览器的缓存存储机制，提高网站加载速度。")])])]),a._v(" "),s("h3",{attrs:{id:"_2-借助代理服务器缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-借助代理服务器缓存"}},[a._v("#")]),a._v(" 2. 借助代理服务器缓存")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("设置资源可被代理服务器缓存")]),a._v("：如果你的网站允许，在服务器端设置"),s("code",[a._v("Cache-Control: public")]),a._v("指令，表示该资源可以被任何中间代理服务器缓存，而不仅仅是客户端自己的本地缓存。这样，当多个客户端通过同一个代理服务器访问你的网站时，代理服务器就可以直接提供缓存中的资源给后续客户端，无需再向服务器重新请求，从而提高了网站的整体性能。")])])])}),[],!1,null,null,null);s.default=r.exports}}]);